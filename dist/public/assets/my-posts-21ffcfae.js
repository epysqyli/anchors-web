import{k as w,u as m,R as _,g as i,a as b,i as s,p as E,l as S,c as n,r as C,s as k,m as P,t as c,b as $,o as M,d as A,L as R,F as D,S as L,P as N,j}from"./entry-client-70f5ea60.js";import{C as z}from"./index-608f9ce4.js";const F=c('<div class="col-span-1 py-5 px-5 mx-auto text-slate-300 border border-opacity-20 border-slate-200 bg-opacity-90 rounded-md hover:text-slate-200 flex flex-col justify-between"><div class="flex items-center justify-around"><div class="px-2 py-1 text-center rounded-md"></div><!#><!/></div><div class="w-4/5 my-10 mx-auto text-center break-words"></div><!#><!/>'),K=c('<div class="text-neutral-400 cursor-pointer group hover:text-red-400">'),B=t=>{const{authMode:d}=m(_),p=async()=>{await t.handleDeletion(t.nostrEvent.id)};return(()=>{const l=i(F),u=l.firstChild,a=u.firstChild,f=a.nextSibling,[h,y]=b(f.nextSibling),x=u.nextSibling,e=x.nextSibling,[r,g]=b(e.nextSibling);return s(a,()=>E(t.nostrEvent.created_at)),s(u,(()=>{const o=S(()=>d.get()=="private");return()=>o()?(()=>{const v=i(K);return v.$$click=p,s(v,n(z,{size:28,class:"transition-all mx-auto group-hover:scale-105 group-active:scale-90"})),C(),v})():[]})(),h,y),s(x,()=>k(t.nostrEvent.content)),s(l,n(P,{get href(){return`/events/${t.nostrEvent.id}`},class:`text-sm text-slate-400 break-all bg-slate-700
        hover:text-slate-200 active:scale-95 p-2 rounded-md transition-all`,get children(){return t.nostrEvent.id}}),r,g),l})()};w(["click"]);const H=c('<h1 class="text-slate-100 text-center text-2xl md:text-4xl font-bold py-5 xl:py-10">Your <!#><!/> posts'),O=c('<div class="w-11/12 xl:w-5/6 px-5 gap-1 mx-auto overflow-y-scroll xl:custom-scrollbar pb-10 h-4/5 grid grid-cols-1 xl:grid-cols-3 gap-x-5 gap-y-5 xl:gap-y-10">'),T=c('<div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-full">Post correctly deleted'),U=c('<div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 z-10 xl:w-1/3">'),G=()=>{const{relay:t,anchorsMode:d}=m(_),[p,l]=$([]),[u,a]=$(!0),[f,h]=$(!1),y=async e=>{if((await t.deleteEvent(e)).error){console.log("Delete event failed");return}const g=p().filter(o=>o.id!=e);l(g),h(!0)},x=async()=>{if(t.userPubKey==null){console.log("your public key is not available"),a(!1);return}a(!0);const e=await t.fetchTextEvents({rootOnly:!0,isAnchorsMode:d.get(),filter:{authors:[t.userPubKey]}});l(e.sort(j)),a(!1)};return M(async()=>{await x()}),A(async()=>{d.get(),await x()}),[(()=>{const e=i(H),r=e.firstChild,g=r.nextSibling,[o,v]=b(g.nextSibling);return o.nextSibling,s(e,()=>d.get()?"Anchors":"Nostr",o,v),e})(),n(L,{get when(){return!u()},get fallback(){return n(R,{})},get children(){const e=i(O);return s(e,n(D,{get each(){return p()},children:r=>n(B,{nostrEvent:r,handleDeletion:y})})),e}}),(()=>{const e=i(U);return s(e,n(N,{autoClose:!0,show:f,setShow:h,get children(){return i(T)}})),e})()]};export{G as default};
