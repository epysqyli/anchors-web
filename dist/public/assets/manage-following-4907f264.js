import{u as R,R as U,b as g,o as L,g as i,c as a,L as z,i as l,F as A,a as v,m as N,E as T,l as $,r as j,S as H,k as I,t as c}from"./entry-client-70f5ea60.js";import{c as K,d as q}from"./index-c5d10f7a.js";const B=c('<h1 class="text-slate-100 text-center text-2xl md:text-4xl font-bold py-5 xl:py-10">Manage your following'),D=c('<div class="h-4/5 w-11/12 xl:w-5/6 mx-auto p-3 overflow-y-auto xl:custom-scrollbar grid grid-cols-1 xl:grid-cols-3 gap-5">'),G=c('<div class="col-span-1 border border-opacity-20 border-slate-200 break-all rounded-md text-slate-300 p-5 flex flex-col justify-between hover:bg-slate-600 hover:bg-opacity-60"><!#><!/><!#><!/><div class="text-sm text-center border-t border-slate-400 border-opacity-25 pt-5">'),J=c('<div class="w-2/3 my-10 mx-auto text-center"><div class="border w-fit mx-auto p-5 rounded-full border-opacity-25 border-slate-300 cursor-pointer transition-all group active:border-opacity-80 hover:bg-slate-500">'),V=()=>{const{relay:o,authMode:k}=R(U),[w,d]=g(!1),[p,_]=g([]),[y,u]=g([]);L(async()=>{d(!0);let s=o.following;if(s.length==0&&(s=await o.fetchContacts()),s.length!==0){const e=await o.fetchEventsMetadata({authors:s}),t=e.map(r=>r.pubkey);s.filter(r=>!t.includes(r)).forEach(r=>{e.push({about:"",name:"",picture:"",pubkey:r})}),_(e)}u(p().map(e=>e.pubkey)),d(!1)});const M=async(s,e)=>{if(m(e)){const t=o.following.filter(r=>r!==e);(await o.followUser(t)).error||u(t)}else{const t=[...y(),e];(await o.followUser(t)).error||u(t)}},m=s=>y().includes(s);return[i(B),a(H,{get when(){return!w()},get fallback(){return a(z,{})},get children(){const s=i(D);return l(s,a(A,{get each(){return p()},children:e=>(()=>{const t=i(G),n=t.firstChild,[r,P]=v(n.nextSibling),C=r.nextSibling,[x,E]=v(C.nextSibling),S=x.nextSibling;return l(t,a(N,{get href(){return`/users/${e.pubkey}`},class:"bg-slate-600 rounded py-2 hover:bg-slate-500",get children(){return a(T,{get about(){return e.about},layout:"h",get name(){return e.name},get picture(){return e.picture},get pubKey(){return e.pubkey}})}}),r,P),l(t,(()=>{const F=$(()=>k.get()=="private");return()=>F()?(()=>{const h=i(J),f=h.firstChild;return f.$$click=b=>M(b,e.pubkey),l(f,(()=>{const b=$(()=>!!m(e.pubkey));return()=>b()?a(K,{size:36,class:"mx-auto hover:scale-105 active:scale-95"}):a(q,{size:36,class:"mx-auto hover:scale-105 active:scale-95"})})()),j(),h})():[]})(),x,E),l(S,()=>e.pubkey),t})()})),s}})]};I(["click"]);export{V as default};
